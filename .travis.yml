---
language: python
sudo: required
cache:
  pip: true

env:
  global:
    - fast_finish: true

services:
  - docker

before_install:
  - sudo apt-get -qq update

install:
  - sudo apt-get -y install python-pip libssl-dev
  - pip install --upgrade setuptools
  - pip install molecule
  - pip install molecule[docker]

script:
  - molecule init template --url https://github.com/joscherrer/ansible-role-skeleton --no-input
  - cd role
  - molecule test

notifications:
  email:
    on_failure: change
    on_success: never
